<div class="admin-container">
  <aside class="sidebar-viva">
    <div class="logo-section">
      <h5 class="m-0 fw-bold text-dark">Esperanza Viva</h5>
      <small class="text-dark">centro de conciliación</small>
    </div>
    <nav class="sidebar-nav">
      <a class="nav-link-viva" routerLink="/admin-dashboard" routerLinkActive="active">Inicio</a>
      <a class="nav-link-viva" routerLink="/gestion-usuarios" routerLinkActive="active">Gestión de usuarios</a>
      <a class="nav-link-viva" routerLink="/configuracion" routerLinkActive="active">Configuración</a>
      <a class="nav-link-viva" routerLink="/auditoria" routerLinkActive="active">Auditoría</a>
      <a class="nav-link-viva active" routerLink="/reportes" routerLinkActive="active">Reportes</a>
    </nav>
    <div class="sidebar-footer">
      <button class="btn-logout-viva" (click)="cerrarSesion()">
        <i class="bi bi-arrow-left"></i> Cerrar Sesión
      </button>
    </div>
  </aside>

  <main class="main-content-viva">
    <header class="content-header d-flex justify-content-between align-items-center">
      <div class="header-titles">
        <h2 class="text-warning fw-bold m-0">Reportes Institucionales</h2>
        <p class="text-secondary small m-0">Indicadores reales del sistema</p>
      </div>
      <div class="admin-badge"><span>{{ usuarioActivo }}</span></div>
    </header>

    <div class="row g-4 mt-2">
      <div class="col-md-6">
        <div class="info-card-wireframe p-4 h-100">
          <h6 class="text-warning mb-4">Solicitudes por estado</h6>
          
          <div class="mb-4">
            <div class="d-flex justify-content-between small mb-2 text-white">
              <span>Pendiente</span> 
              <span class="fw-bold">{{ data.pendientes }}</span>
            </div>
            <div class="progress-wire-bg">
              <div class="progress-wire-bar" 
                   [style.width.%]="(data.pendientes / (data.totalSolicitudes || 1)) * 100">
              </div>
            </div>
          </div>

          <div class="mb-4">
            <div class="d-flex justify-content-between small mb-2 text-white">
              <span>Asignado</span> 
              <span class="fw-bold">{{ data.asignados }}</span>
            </div>
            <div class="progress-wire-bg">
              <div class="progress-wire-bar" 
                   [style.width.%]="(data.asignados / (data.totalSolicitudes || 1)) * 100">
              </div>
            </div>
          </div>

          <div class="mb-2">
            <div class="d-flex justify-content-between small mb-2 text-white">
              <span>Finalizado</span> 
              <span class="fw-bold">{{ data.finalizadosContador }}</span>
            </div>
            <div class="progress-wire-bg">
              <div class="progress-wire-bar" 
                   [style.width.%]="(data.finalizadosContador / (data.totalSolicitudes || 1)) * 100">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="info-card-wireframe p-4 h-100">
          <h6 class="text-warning mb-4">Carga de trabajo</h6>
          <div class="scroll-carga" style="max-height: 250px; overflow-y: auto;">
            <div *ngFor="let p of listaPersonalCarga" class="work-item-black-wire d-flex justify-content-between align-items-center mb-2">
              <div>
                <div class="fw-bold text-white">{{ p.nombreCompleto }}</div>
                <small class="text-secondary">{{ p.usuario }} | {{ p.rol }}</small>
              </div>
              <span class="text-warning fw-bold">{{ p.cantidadCasos || 0 }} casos</span>
            </div>
            <p *ngIf="listaPersonalCarga.length === 0" class="text-secondary small text-center mt-5">
              No hay personal operativo registrado.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="row mt-4">
      <div class="col-12">
        <div class="info-card-wireframe p-4">
          <h6 class="text-warning mb-4">Indicadores Clave</h6>
          <div class="row g-3">
            <div class="col-md-4">
              <div class="indicator-box-black">
                <h2 class="text-warning fw-bold m-0">{{ data.totalSolicitudes }}</h2>
                <small class="text-secondary">Total Solicitudes</small>
              </div>
            </div>
            <div class="col-md-4">
              <div class="indicator-box-black">
                <h2 class="text-success fw-bold m-0">{{ data.tasaFinalizacion }}%</h2>
                <small class="text-secondary">Tasa de Finalizacion</small>
              </div>
            </div>
            <div class="col-md-4">
              <div class="indicator-box-black">
                <h2 class="text-primary fw-bold m-0">{{ data.personalActivo }}</h2>
                <small class="text-secondary">Personal Activo</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>