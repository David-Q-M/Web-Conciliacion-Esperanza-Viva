<div class="admin-container">
  <!-- Sidebar Profesional -->
  <aside class="sidebar-viva">
    <div class="logo-section">
      <h5 class="m-0 fw-bold text-dark">ESPERANZA VIVA</h5>
      <small class="text-dark fw-bold">ADMINISTRACI√ìN</small>
    </div>
    <nav class="sidebar-nav">
      <a class="nav-link-viva active" routerLink="/admin-dashboard" routerLinkActive="active">
        <i class="bi bi-speedometer2 me-2"></i> Inicio
      </a>
      <a class="nav-link-viva" routerLink="/gestion-usuarios" routerLinkActive="active">
        <i class="bi bi-people-fill me-2"></i> Gesti√≥n de usuarios
      </a>
      <a class="nav-link-viva" routerLink="/configuracion" routerLinkActive="active">
        <i class="bi bi-sliders me-2"></i> Configuraci√≥n
      </a>
      <a class="nav-link-viva" routerLink="/auditoria" routerLinkActive="active">
        <i class="bi bi-shield-lock-fill me-2"></i> Auditor√≠a
      </a>
      <a class="nav-link-viva" routerLink="/reportes" routerLinkActive="active">
        <i class="bi bi-bar-chart-fill me-2"></i> Reportes
      </a>
    </nav>
    <div class="sidebar-footer px-3">
      <!-- Bot√≥n logout estilo original: negro con texto amarillo/blanco -->
      <button class="btn w-100 fw-bold" style="background: #000; color: #fff;" routerLink="/">
        <i class="bi bi-box-arrow-left"></i> Cerrar Sesi√≥n
      </button>
    </div>
  </aside>

  <!-- Contenido Principal -->
  <main class="main-content-viva">
    <!-- Header -->
    <header class="d-flex justify-content-between align-items-center mb-5">
      <div class="header-titles">
        <h2 class="text-warning fw-bold m-0">Panel de Control</h2>
        <p class="text-secondary small m-0">Visi√≥n general del estado del centro de conciliaci√≥n</p>
      </div>
      <div class="admin-badge text-end">
        <div class="text-white fw-bold">{{ usuarioActivo }}</div>
        <small class="text-success">‚óè En l√≠nea</small>
      </div>
    </header>

    <!-- Mensaje de Error -->
    <div *ngIf="errorMessage" class="alert alert-danger mb-4 d-flex align-items-center" role="alert">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>
      <div>
        {{ errorMessage }}
      </div>
    </div>

    <!-- Centro de Notificaciones -->
    <section *ngIf="alertasSistema.length > 0" class="mb-4">
      <div *ngFor="let alerta of alertasSistema" class="alert-panel animate__animated animate__fadeIn">
        <div class="alert-pulse"></div>
        <span class="fw-bold">{{ alerta }}</span>
      </div>
    </section>

    <!-- M√©tricas Clave (KPIs) -->
    <section class="row g-4 mb-5">
      <!-- Total Expedientes -->
      <div class="col-md-3">
        <div class="glass-card">
          <div class="d-flex justify-content-between">
            <div class="stat-label">EXPEDIENTES</div>
            <i class="bi bi-folder2-open text-warning fs-4"></i>
          </div>
          <div class="stat-value">{{ stats.totalExpedientes }}</div>
          <small class="text-secondary">Totales registrados</small>
        </div>
      </div>

      <!-- Pendientes (Stalled Checks) -->
      <div class="col-md-3">
        <div class="glass-card">
          <div class="d-flex justify-content-between">
            <div class="stat-label">PENDIENTES</div>
            <i class="bi bi-hourglass-split text-danger fs-4"></i>
          </div>
          <div class="stat-value text-danger">{{ stats.pendientes }}</div>
          <small class="text-secondary" *ngIf="kpis.casosEstancados > 0">
            {{ kpis.casosEstancados }} con retraso
          </small>
        </div>
      </div>

      <!-- Eficiencia (Tasa Acuerdos) -->
      <div class="col-md-3">
        <div class="glass-card">
          <div class="d-flex justify-content-between">
            <div class="stat-label">EFICIENCIA</div>
            <i class="bi bi-pie-chart text-success fs-4"></i>
          </div>
          <div class="stat-value text-success-neon">{{ kpis.tasaAcuerdos }}%</div>
          <small class="text-secondary">Tasa de Acuerdos</small>
        </div>
      </div>

      <!-- Tiempo Promedio -->
      <div class="col-md-3">
        <div class="glass-card">
          <div class="d-flex justify-content-between">
            <div class="stat-label">TIEMPO PROM.</div>
            <i class="bi bi-clock-history text-info fs-4"></i>
          </div>
          <div class="stat-value">{{ kpis.tiempoPromedio }} <span class="fs-6 text-secondary">d√≠as</span></div>
          <small class="text-secondary">Resoluci√≥n de casos</small>
        </div>
      </div>
    </section>

    <div class="row g-4">
      <!-- Monitor de Sesiones -->
      <div class="col-lg-8">
        <div class="glass-card">
          <h6 class="text-warning-neon mb-4">üñ•Ô∏è Monitor de Sesiones Activas</h6>
          <div class="table-responsive">
            <table class="table table-dark table-borderless table-hover">
              <thead>
                <tr class="text-secondary small text-uppercase">
                  <th>Usuario</th>
                  <th>Rol</th>
                  <th>√öltima Actividad</th>
                  <th>Estado</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let s of listaUsuariosActivos">
                  <td class="fw-bold">{{ s.nombre }}</td>
                  <td><span class="badge bg-secondary">{{ s.rol }}</span></td>
                  <td>{{ s.hora }}</td>
                  <td><span class="badge bg-success">En l√≠nea</span></td>
                </tr>
                <tr *ngIf="listaUsuariosActivos.length === 0">
                  <td colspan="4" class="text-center text-secondary py-3">No hay actividad reciente detectada.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Acciones R√°pidas -->
      <div class="col-lg-4">
        <div class="glass-card">
          <h6 class="text-warning-neon mb-4">‚ö° Acciones R√°pidas</h6>
          <button class="btn-quick-action" routerLink="/gestion-usuarios">
            <i class="bi bi-person-plus-fill me-2"></i> Registrar Empleado
          </button>
          <button class="btn-quick-action" routerLink="/reportes">
            <i class="bi bi-file-earmark-pdf-fill me-2"></i> Generar Reporte Mensual
          </button>
          <button class="btn-quick-action" routerLink="/auditoria">
            <i class="bi bi-search me-2"></i> Buscar en Logs
          </button>
          <button class="btn-quick-action" routerLink="/configuracion">
            <i class="bi bi-gear-wide-connected me-2"></i> Ajustes del Sistema
          </button>
        </div>
      </div>
    </div>
  </main>
</div>